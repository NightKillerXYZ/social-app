<!DOCTYPE html>
<html>
<head>
  <title>Student Q&A Forum</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background:#f7f8fa; font-family:'San Francisco',Arial,sans-serif; margin:0; padding:0;}
    .navbar { width:100%; background:#2453ff; color:#fff; padding:18px 32px; font-size:23px; letter-spacing:1px; box-shadow:0 2px 8px rgba(36,83,255,0.08); display:flex; align-items:center; justify-content:space-between;}
    .navbar .title { font-weight:700;}
    .navbar a, .ask-btn { color:#fff; text-decoration:none; font-size:16px; padding:8px 28px; background:linear-gradient(97deg,#2453ff 85%,#4267ee 100%); margin-left:8px; border-radius:18px; font-weight:600; border:none; transition:background 0.22s, box-shadow 0.14s; box-shadow:0 2.5px 10px #2453ff12; cursor:pointer; display:inline-block; letter-spacing:0.1px;}
    .navbar a:hover, .ask-btn:hover { background:#183db1;}
    .main-container { max-width:660px; margin:50px auto 0 auto; background:#fff; border-radius:18px; box-shadow:0 4px 18px rgba(0,0,0,.07); padding:36px 18px 24px;}
    .questions-list { padding:0; margin:0; list-style:none;}
    .question-card { background:#f2f3fb; border-radius:13px; margin-bottom:19px; box-shadow:0 2px 12px #2453ff10; transition:box-shadow 0.22s, background 0.17s; padding:16px 18px 14px 18px; position:relative; display:flex; align-items:center;}
    .question-card:hover { box-shadow:0 4px 22px #2453ff26; background:#e6e9ff;}
    .question-link { text-decoration:none; color:#2453ff; font-size:17px; font-weight:600; letter-spacing:.1px; display:block; flex:1; word-break:break-word; min-width:0;}
    .att-icon { display:inline-flex; align-items:center; color:#2453ff; background:#ececec; border-radius:6px; border:1px solid #dbe1fd; font-size:14px; font-weight:500; padding:3px 8px 3px 6px; margin-left:13px; margin-top:3px; text-decoration:none;}
    .att-icon .icon { margin-right:6px; font-size:15px; }
    .att-icon:hover { background:#e6eaff; color: #183db1; }
    .timestamp { font-size:14px; color:#8598bb; position:absolute; bottom:7px; right:15px; font-style:italic;}
    .no-questions { margin:32px 0 0 5px; color:#444; font-size:17px; opacity:0.82;}
    @media (max-width:670px) {
      .main-container { max-width:99vw; padding:10px 2vw 20px;}
      .navbar { padding:12px 7px; font-size:19px; }
      .navbar a, .ask-btn { font-size:14px; padding:6px 16px; }
      .question-link{font-size:15px;}
      .att-icon{font-size:12px;}
    }
  </style>
</head>
<body>
  <div class="navbar">
    <span class="title">Student Q&A Forum</span>
    <a class="ask-btn" href="{{ url_for('ask') }}">+ Ask a Question</a>
  </div>
  <div class="main-container">
    {% if questions %}
      <ul class="questions-list">
        {% for q in questions %}
          <li class="question-card">
            <a class="question-link" href="{{ url_for('question', question_id=q['_id']) }}">
              {{ q['text_rendered']|safe }}
            </a>
            {% if q.get('file_attachments') %}
              {% for f in q.file_attachments %}
                {% if f.type in ['png','jpg','jpeg','gif'] %}
                  <a class="att-icon" href="{{ url_for('static', filename=f.url) }}" target="_blank"><span class="icon">&#128247;</span>Photo</a>
                {% elif f.type=='pdf' %}
                  <a class="att-icon" href="{{ url_for('static', filename=f.url) }}" target="_blank"><span class="icon">&#128462;</span>PDF</a>
                {% elif f.type=='docx' %}
                  <a class="att-icon" href="{{ url_for('static', filename=f.url) }}" target="_blank"><span class="icon">&#128196;</span>DOCX</a>
                {% elif f.type=='pptx' %}
                  <a class="att-icon" href="{{ url_for('static', filename=f.url) }}" target="_blank"><span class="icon">&#128187;</span>PPTX</a>
                {% elif f.type in ['mp4','mov'] %}
                  <a class="att-icon" href="{{ url_for('static', filename=f.url) }}" target="_blank"><span class="icon">&#127909;</span>Video</a>
                {% elif f.type=='mp3' %}
                  <a class="att-icon" href="{{ url_for('static', filename=f.url) }}" target="_blank"><span class="icon">&#127925;</span>Audio</a>
                {% endif %}
              {% endfor %}
            {% endif %}
            <span class="timestamp">{{ q['timestamp'].strftime('%Y-%m-%d %H:%M') }}</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="no-questions">
        No questions posted yet! Be the first to <a href="{{ url_for('ask') }}">ask a question</a>.
      </div>
    {% endif %}
  </div>
</body>
</html>
