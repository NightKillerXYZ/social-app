<!DOCTYPE html>
<html>
<head>
  <title>Ask a Question</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #f7f8fa; font-family:'San Francisco',Arial,sans-serif; margin:0; padding:0;}
    .navbar { width:100%; background:#2453ff; color:#fff; padding:18px 32px; font-size:23px; letter-spacing:1px; box-shadow: 0 2px 8px rgba(36,83,255,0.08); display:flex; align-items:center; justify-content:space-between;}
    .navbar a { color:#fff; text-decoration:none; font-size:16px; font-weight:600; }
    .container { max-width:550px; margin:46px auto 0 auto; background:#fff; border-radius:16px; box-shadow:0 4px 18px rgba(0,0,0,.07); padding:32px 18px 28px;}
    h1 { color:#244ed6; font-size:26px; letter-spacing:0.3px;}
    .format-toolbar { margin-bottom:6px; display:flex; gap:6px; flex-wrap:wrap;}
    .format-toolbar button { border:none; background:#e7eafd; color:#2453ff; font-size:15px; font-weight:700; padding:5px 9px; border-radius:6px; cursor:pointer; transition:background 0.14s;}
    .format-toolbar button:hover { background:#d0dafe; }
    form { margin-top:18px; display:flex; flex-direction:column; align-items:stretch;}
    textarea, input[type="file"] { font-size:16px; border-radius:10px; border:1.2px solid #b9c7ef; padding:10px 12px; margin-bottom:12px; box-shadow:0 1.5px 5px #2453ff14;}
    button[type="submit"] { padding:12px 0; font-size:16px; border-radius:17px; border:none; background:linear-gradient(98deg,#2453ff 90%,#5776e9 100%); color:#fff; cursor:pointer; font-weight:600; transition:background 0.17s; box-shadow:0 1.5px 4px #2453ff15; margin-top:12px;}
    button[type="submit"]:hover { background:#183db1; }
    label { font-size:15px; color:#2453ff; margin-bottom:3px; margin-left:3px;}
    .help-note { font-size:14px; color:#888; margin-bottom:10px;}
    @media(max-width:650px){
      .container { max-width:98vw;}
      .navbar { padding:12px 8px; font-size:18px;}
      button[type="submit"] { font-size:14px;}
    }
  </style>
</head>
<body>
  <div class="navbar">
    <a href="{{ url_for('index') }}">&#8678; All Questions</a>
    <span>Ask a Question</span>
    <span></span>
  </div>
  <div class="container">
    <h1>Ask a Question (Anonymous)</h1>
    <div class="help-note">
      <b>Formatting:</b> <code>**bold**</code> <code>*italic*</code> <code>~~strike~~</code> <code>~sub~</code> <code>^^super^^</code>
    </div>
    <form method="post" enctype="multipart/form-data">
      <div class="format-toolbar">
        <button type="button" onclick="insertAtCursor(this, '**', '**')" title="Bold"><b>B</b></button>
        <button type="button" onclick="insertAtCursor(this, '*', '*')" title="Italic"><i>I</i></button>
        <button type="button" onclick="insertAtCursor(this, '~~', '~~')" title="Strike"><s>S</s></button>
        <button type="button" onclick="insertAtCursor(this, '~', '~')" title="Subscript">X<sub>2</sub></button>
        <button type="button" onclick="insertAtCursor(this, '^^', '^^')" title="Superscript">X<sup>2</sup></button>
      </div>
      <textarea name="question" rows="5" placeholder="Type your question here..." required></textarea>
      <label>
        Attach Files (images, pdf, docx, pptx, mp4, mov, mp3):<br>
        <input type="file" name="image" accept=".png,.jpg,.jpeg,.gif,.pdf,.docx,.pptx,.mp4,.mov,.mp3" multiple>
      </label>
      <button type="submit">Post Question</button>
    </form>
    <div style="margin-top:20px;">
      <a href="{{ url_for('index') }}" style="color:#2453ff;">&#8592; Back to Questions</a>
    </div>
  </div>
  <script>
    function insertAtCursor(btn, before, after) {
      let area = btn.parentElement.parentElement.querySelector('textarea');
      if (!area) return;
      area.focus();
      let start = area.selectionStart, end = area.selectionEnd;
      let val = area.value;
      let selected = val.substring(start, end);
      let replacement = before + selected + after;
      area.value = val.substring(0, start) + replacement + val.substring(end);
      let cursorPos = start + before.length + (selected.length ? selected.length + after.length : 0);
      area.setSelectionRange(cursorPos, cursorPos);
    }
  </script>
</body>
</html>
